<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='/modding_guide/css/styles.css' rel='stylesheet' type='text/css'>
        <link rel="icon" type="image/png" href='/modding_guide/images/favicon_logo_sh.png'>
        <link rel="apple-touch-icon" type="image/png" href='/modding_guide/images/favicon_logo_sh.png'>
        <link rel="icon" type="image/png" sizes="144x144" href='/modding_guide/images/favicon_logo_sh.png'>
        <title>Steam Workshop mods</title>
    </head>
    <body>
        <script src="/modding_guide/menus.js"></script>
        <main>
            <h1>Steam Workshop mods</h1>
            <ul>
                <li><a href="#InstallWorkshop">Installing</a></li>
                <li><a href="#UninstallWorkshop">Uninstalling</a></li>
                <li><a href="#UploadWorkshop">Uploading your own mods</a></li>
                <li><a href="#UploadTemplates">Uploading building templates</a></li>
            </ul>
            <h2><a name="InstallWorkshop"></a>Instructions for installing mods through the Steam Workshop:</h2>
            <ol>
                <li>Run the game while Steam is running, and open the Mods menu from the main menu.
                    <img src="/modding_guide/images/essentials/managing/mods_menu.png" alt="mods_menu"/>
                </li>
                <li>You should see a "Browse Steam Workshop" button on top of the second list.
                    <img src="/modding_guide/images/essentials/managing/browse_workshop.png" alt="browse_workshop"/>
                </li>
                <li>The Steam overlay will open and show the Workshop. Browse items in the workshop, and when you see a mod that you like, click on the "Subscribe" button.
                    <img src="/modding_guide/images/essentials/managing/workshop_overlay.png" alt="workshop_overlay"/>
                    <img src="/modding_guide/images/essentials/managing/suscribe.png" alt="suscribe"/>
                </li>
                <li>The mod should start downloading. Return to the game, and you should see the mod listed in the Workshop mods list. You might see a download progress bar in the list item if it takes a while to download.
                    <img src="/modding_guide/images/essentials/managing/downloading.png" alt="downloading"/>
                </li>
                <li>Make sure it is checked / enabled after it finishes downloading.
                    <img src="/modding_guide/images/essentials/managing/downloaded.png" alt="downloaded"/>
                </li>
                <li>Accept to reload when returning to the main menu, so that the downloaded mods are loaded.
                    <img src="/modding_guide/images/essentials/managing/apply_changes.png" alt="apply_changes"/>
                </li>
            </ol>
            <h2><a name="UninstallWorkshop"></a>Instructions for uninstalling mods from the Steam Workshop:</h2>
            <p>If you subscribed to a mod from the Steam Workshop, you can uninstall it from within the game:</p>
            <ol>
                <li>Go to the Mods menu from the main menu, and find the mod you wish to uninstall.</li>
                <li>Hover over it, and click on "Unsubscribe from mod" (the red X button). Alternatively, you can click on "View mod in workshop" (the button with the Steam icon) and unsubscribe from the Workshop itself.
                    <img src="/modding_guide/images/essentials/managing/downloaded.png" alt="downloaded"/>
                    <img src="/modding_guide/images/essentials/managing/unsuscribing.png" alt="unsuscribing"/>
                </li>
                <li>The mod will be effectively deleted from your computer once you completely exit the game. There might be empty folders left, that's the way Steam handles unsubscribing.</li>
            </ol>
            <p>For reference, the Workshop mods you subscribe to are downloaded inside this location: C:\Program Files (x86)\Steam\steamapps\workshop\content\253250. Since they're not in the usual Stonehearth mods folder, you can hover over them in the Mods menu and click on "Open mod folder" (the button with the folder icon), if you need to browse them.
                <img src="/modding_guide/images/essentials/managing/workshop_downloads.png" alt="workshop_downloads"/>
            </p>
            <p><img src="/modding_guide/images/common/row_alert2.png" alt="icon"/>Bear in mind that savefiles that were made with that mod active will throw errors if you try to load them after uninstalling it (same if you disable the mod instead of removing it).</p>
            <h2><a name="UploadWorkshop"></a>Instructions for uploading mods to the Steam Workshop:</h2>
            <p>Workshop mods require a Steam file ID so they <strong>must</strong> be created from our UI in order to generate it. They will be automatically converted to .smod files when uploading them to the Workshop, but you'll still be able to edit your local version without needing to uncompress it.</p>
            <ol>
                <li>
                    <p>Go to the Mods menu from the main menu, and click on the <strong>"Create New Mod"</strong> button above the third column.
                        <img src="/modding_guide/images/essentials/managing/create_mod_button.png" alt="create_mod_button"/>
                    </p>
                </li>
                <li>
                    <p>Fill the required fields:
                        <img src="/modding_guide/images/essentials/managing/create_ws_mod_form.png" alt="create_ws_mod_form"/>
                        A <strong>title/name</strong> for your mod and a <strong>namespace</strong>. The namespace can only contain alphanumeric characters, hyphens and underscores. Spaces and other characters are not allowed. Try to keep it short and unique.
                    </p>
                </li>
                <li>
                    <p>If your mod is going to be exclusively a translation mod, check the <strong>"Is this a translation mod?"</strong> checkbox. This will add a special tag that will allow different players to keep their own translation mods active when they join a multiplayer game, so that each player can play in their own language.</p>
                </li>
                <li>
                    <p>If your mod is going to add building templates, check the <strong>"Is this a building templates mod?"</strong> checkbox. This will add a special tag that will allow you to add building templates to your mod very easily. More instructions <a href="#UploadTemplates">here</a>.</p>
                </li>
                <li>
                    <p>Click on "Create". This will create the mod folder and a pre-filled manifest for you. The mod will appear in the Workshop Uploads list, and the mod folder will be automatically opened so you can start adding content to it.
                        <img src="/modding_guide/images/essentials/managing/ws_mod_just_created.png" alt="ws_mod_just_created"/>
                        <img src="/modding_guide/images/essentials/managing/steam_uploads_mod.png" alt="steam_uploads_mod"/>
                    </p>
                </li>
                <li>
                    <p>The Workshop mods that you upload will live inside its own folder (<strong>"steam_uploads"</strong>) instead of inside the "mods" folder.
                        Don't copy them there because you will get a <a href="../unmanaged/index.html#ModConflicts">conflict</a> inside the game (having two mods with the same namespace), and you would have to disable or remove one of them.
                    </p>
                </li>
                <li>
                    <p>You can browse your new mod in the workshop right now, but its visibility will be hidden so that you can add content to it before making it public. It might take a while for Steam to update the workshop, however, so you might see a blank page for a while.
                        <img src="/modding_guide/images/essentials/managing/first_upload_to_ws.png" alt="first_upload_to_ws"/>
                    </p>
                </li>
                <li>
                    <p>Add content to your mod.</p>
                </li>
                <li>
                    <p>Once you're satisfied with your mod, go to the Mods menu once again and hover over your mod in the Workshop Uploads list. Click on the "Upload mod to workshop" button (the green icon with the arrow).
                        <img src="/modding_guide/images/essentials/managing/ws_mod_just_created.png" alt="ws_mod_just_created"/>
                    </p>
                </li>
                <li>
                    <p>A new form will appear.
                        <img src="/modding_guide/images/essentials/managing/update_ws_mod_form.png" alt="update_ws_mod_form"/>
                        Fill in the <strong>title</strong> (it'll be the name displayed at the Workshop, can be different than your mod's title/inner name), a <strong>description</strong> for your mod, change the <strong>visibility</strong> if you want to (by default it'll be Public, unlike when we created the mod), and optionally add some custom <strong>tags</strong> (separated by commas), upload a <strong>preview image</strong>, or add some initial <strong>changelog notes</strong>. Make sure you agreed to the <strong>terms of service</strong> too before proceeding.
                    </p>
                </li>
                <li>
                    <p>Click on Upload. The mod will start uploading to Steam (a progress bar will be shown in the list, it might fill several times since the mod will be compressed before uploading it), and once it's finished, the Steam overlay will automatically open, showing your mod in the Workshop.
                        <img src="/modding_guide/images/essentials/managing/updating_ws_mod.png" alt="updating_ws_mod"/>
                    </p>
                </li>
                <li>
                    <p>Next time you change your mod's content, you can click on the upload button from the Mods menu and change any field from that form, and the contents of the mod will get updated to the workshop. <br/>
                        <img src="/modding_guide/images/common/row_alert2.png" alt="icon"/> Make sure your manifest is valid before trying to upload or update your mod to the workshop. No error messages should appear in the Mods menu for your mod. Sometimes the "Invalid Steam File Id" error will appear when you open the Mods menu, but will go away quickly once the game syncs with Steam.
                    </p>
                </li>
            </ol>
            <p>You can develop your mod inside the mods folder instead of the steam_uploads folder if you want, then create a new mod from the Mods menu so that a Steam file ID is generated, copy paste your mod contents to that folder, and edit the auto-generated manifest to include the missing keys. But you'll have to disable or remove the one in the mods folder after uploading it to Steam, since the game will consider it a conflict (you'll have 2 mods with the same namespace).</p>
            <p><img src="/modding_guide/images/common/row_alert2.png" alt="icon"/>If your mod was uploaded to the workshop as a plain folder, and players have already downloaded it, they'll need to unsubscribe, restart and subscribe again in order to get the latest smod version. Otherwise their local copies won't be updated correctly. <br/>
                Players can check if they have plain files or a .smod by clicking on the folder icon of the corresponding subscribed mod in the Mods menu. For building templates, they won't be compressed, so that players can still see their images in the Mods menu.
            </p>
            <h2><a name="UploadTemplates"></a>Instructions for uploading building templates as a mod:</h2>
            <p>The mods menu includes an easy way to redistribute a pack of building templates as a mod. These templates mods won't be compressed when uploading them, so that players can see their images in the Mods menu.</p>
            <p>First create a mod as explained above, and make sure to check the <strong>"Is this a building templates mod?"</strong> checkbox. Once it appears in the Workshop Uploads list, click on the <strong>"Edit this mod's list of templates"</strong> button, which has an icon for editing templates.
                <img src="/modding_guide/images/essentials/managing/template_mod_created.png" alt="template_mod_created"/>
                A new window will appear and let you choose from your existing building templates:
                <img src="/modding_guide/images/essentials/managing/choosing_templates.png" alt="choosing_templates"/>
                <img src="/modding_guide/images/common/gold.png" alt="icon"/> The templates will be copied to your mod, but they won't be deleted from the main game. If you later decide to add other templates, or remove some of them your mod, you can do so through this menu too (only the templates from your mod will be affected by the deletion).
            </p>
            <p>Once you click 'OK', a confirmation dialog will appear:
                <img src="/modding_guide/images/essentials/managing/confirm_templates.png" alt="confirm_templates"/>
                In the mods list, there will be an arrow button at the right for the mods that have building templates. Clicking on it will expand / collapse the list of templates that the mod has (which is convenient if you need to see which templates are in which mod):
                <img src="/modding_guide/images/essentials/managing/viewing_templates.png" alt="viewing_templates"/>
                <img src="/modding_guide/images/essentials/managing/viewing_sh_templates.png" alt="viewing_sh_templates"/>
            </p>
            <p>Lastly, remember to upload your mod to the Workshop like explained in the <a href="#UploadWorkshop">above section</a> (step 9 onwards). The <strong>"Building Templates"</strong> tag will appear automatically for your mod in the upload form.</p>
            <p>The game will collect the templates from all the mods and will show them in the building editor's template list.</p>
        </main>
    </body>
</html>