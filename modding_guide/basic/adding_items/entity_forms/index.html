<head>
   <link href='./../../../../css/styles.css' rel='stylesheet' type='text/css'>
   <link rel="icon" type="image/png" href='./../../../../images/favicon_logo_sh.png'>
   <link rel="apple-touch-icon" type="image/png" href='./../../../../images/favicon_logo_sh.png'>
   <link rel="icon" type="image/png" sizes="144x144" href='./../../../../images/favicon_logo_sh.png'>
   <title>Entity Forms</title>
</head>
<body id="documentation">
   <!-- the header of the page -->
   <div class="inner">
      <header>
<div class='logo'>
</div>
</header>

      <div id="content_wrapper">
         <aside class="sidebar">
   <nav>
      <ul>
      
      

   <li>
      <a href='./../../../.././index.html'>Stonehearth's Modding Guide</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/index.html'>Modding Guide</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/index.html'>Modding Essentials</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/managing/index.html'>Managing mods</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/managing/workshop/index.html'>Steam Workshop mods</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/managing/unmanaged/index.html'>Local mods</a>
      <ul>





   </ul>
</li>

   



   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/programming_languages/index.html'>Programming Languages</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/modding_scope/index.html'>What can be modded</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/tools/index.html'>Tools for modding</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/stonehearth/index.html'>The Stonehearth mod</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/json/index.html'>Small intro to JSON</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/manifest/index.html'>The manifest</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/entities_components/index.html'>Entities and components</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/mixins/index.html'>Mixins</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/mixintos_overrides/index.html'>Mixintos and overrides</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/removing/index.html'>Mixintypes</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/localization/index.html'>Localization</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/debugging/index.html'>How to debug your errors</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/debugtools/index.html'>Using debug tools</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/debugtools/debugtools_mod/index.html'>The debugtools mod</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/debugtools/default_console/index.html'>The default console</a>
      <ul>





   </ul>
</li>

   



   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/startermods/index.html'>Startermod example</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/essentials/shed/index.html'>How to save time with SHED</a>
      <ul>





   </ul>
</li>

   



   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/index.html'>Basic Modding</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/basic/art/index.html'>Art Workflow</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/basic/art/modeling/index.html'>Creating models</a>
      <ul>





   </ul>
</li>

   



   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/adding_items/index.html'>Adding new items</a>
      <ul>



   
      

   <li>
      <a href='./../../../.././modding_guide/basic/adding_items/entity_forms/index.html'>Entity Forms</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/adding_items/cloning_manually/index.html'>Adding items manually</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/adding_items/cloning_with_shed/index.html'>Adding items with SHED</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/adding_items/item_scale/index.html'>Changing the scale</a>
      <ul>





   </ul>
</li>

   



   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/catalog/index.html'>The catalog</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/generic_resources/index.html'>Generic resources</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/craftables/index.html'>Adding recipes</a>
      <ul>





   </ul>
</li>

   
      

   <li>
      <a href='./../../../.././modding_guide/basic/storages/index.html'>Storage items</a>
      <ul>





   </ul>
</li>

   



   </ul>
</li>

   



   </ul>
</li>

   



   </ul>
</li>

      </ul>
   </nav>
</aside>


         <div id="content">         
   <div class='page_title'>Entity Forms</div>
   <p><p>Let's take a look at the entity forms component. We'll be using the Piggy Bank from the startermod_basic mod for this explanation (refer to <a href="../../../essentials/startermods/index.html">this</a> for how to get it).</p></p>


<h2>Entity Forms</h2>


<p>Entity Forms is a component used by all the items in the game that can be placed in the world, picked up again, and moved. You should be aware of it when creating new items for your mod.</p>



<p>Some items don't really need it, so they don't have this specific component (for example, non-movable items such as trees/boulders created at world generation, wood or other resources that are not placeable, baskets of food, hearthlings, etc.).</p>



<p>Every placeable item must have 3 forms, represented by different JSON files:</p>



<h3><a name="Root"></a>Root</h3>


<p>This represents the placed item. Its JSON file contains the entity_forms component, therefore references the two other forms's files.
<img src="../../../../images/basic/adding_items/piggy_root.png" alt="piggy_root"/></p>



<p>This is the piggy_bank.json file that represents the Piggy Bank entity:</p>



<pre><code>  {
     "type": "entity",
     "mixins" : "file(piggy_bank_ghost.json)",
     "components" : {
        "stonehearth:entity_forms" : {
           "iconic_form" : "file(piggy_bank_iconic.json)",
           "ghost_form" : "file(piggy_bank_ghost.json)",
           "placeable_on_ground" : true
        },
        "region_collision_shape" : {
           "region": [
              {
                 "min" : { "x" : 0, "y" : 0, "z" : 0 },
                 "max" : { "x" : 1, "y" : 0.4, "z" : 1 }
              }
           ]
        }
     },
     "entity_data" : {
        "stonehearth:net_worth" : {
           "value_in_gold" : 10,
           "rarity" : "common",
           "shop_info" : {
              "buyable" : false,
              "sellable" : true,
              "shopkeeper_level" : 1,
              "shopkeeper_type" : "caravan"
           }
        }
     }
  }
</code></pre>

<p>As you can see, this file also references the ghost form file as a mixin. That is because both the ghost and the final placed item share some properties, such as the QB model, name and description, and storage category. This way we don't have to repeat those properties in the piggy_bank.json file.</p>



<p>The entity_forms component will read the files for the ghost and iconic forms that we declare here, so the game will know how to represent this entity when it is in a stockpile, when we order to place it, and when it is already placed.</p>



<h3><a name="Ghost"></a>Ghost</h3>


<p>This represents the semi-transparent form that the item has when we order to place it in the world but it hasn't been placed yet.
<img src="../../../../images/basic/adding_items/piggy_ghost.png" alt="piggy_ghost"/></p>



<p>This is the piggy_bank_ghost.json file:</p>



<pre><code>  {
     "mixins": "stonehearth:mixins:placed_object",
     "components": {
        "model_variants": {
           "default": {
              "models": [
                 "file(wooden_piggy_bank.qb)"
              ]
           }
        },
        "mob": {
           "model_origin": {
              "x": -0.05,
              "y": 0,
              "z": 0.05
           },
           "region_origin": {
              "x": 0.5,
              "y": 0,
              "z": 0.5
           }
        }
     },
     "entity_data": {
        "stonehearth:catalog": {
           "description": "i18n(startermod_basic:entities.piggy_bank.piggy_bank_ghost.description)",
           "icon": "file(piggy_bank.png)",
           "display_name": "i18n(startermod_basic:entities.piggy_bank.piggy_bank_ghost.display_name)",
           "material_tags": "toy decoration crafted stockpile_decoration"
        }
     }
  }
</code></pre>

<p>Notice that it doesn't have a "type" field, it's not really an entity, it's just a blob of data reused by other entities and components. It only has some mixins, components and entity_data that we need to represent the "ghost" form of the item. We also reuse it as a mixin in the piggy_bank.json file, so all of these properties are pulled into that file too.</p>



<h3><a name="Iconic"></a>Iconic</h3>


<p>This represents the small / simplified form of the item, which we get when we craft / obtain that item and when hearthlings carry it or move it to a stockpile.
<img src="../../../../images/basic/adding_items/piggy_iconic.png" alt="piggy_iconic"/></p>



<p>This is the piggy_bank_iconic.json file:</p>



<pre><code>  {
     "mixins": "stonehearth:mixins:item_properties",
     "type": "entity",
     "components": {
        "model_variants": {
           "default": {
              "models": [
                 "file(wooden_piggy_bank.qb)"
              ]
           }
        },
        "mob" : {
           "model_origin" : { "x": -0.05, "y": 0, "z": 0.05 }
        }
     }
  }
</code></pre>

<p>This file represents the "iconic" form of the item, notice that it's an entity in itself ("type": "entity"). It has its own mixins and components too (this way we can define a different QB model for it, for example). The iconic will have the same name / description / icon than the root form.</p>

   
</div>

      </div>
      <footer>
</footer>

   </div>
</body>
